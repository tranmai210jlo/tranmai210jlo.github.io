<!doctype html>
<html lang="vi">
<title>Tin t·ª©c & Kinh nghi·ªám MXD ‚Äì M·∫πo thi c√¥ng & v·∫≠t t∆∞</title>
<meta name="description" content="M·∫πo thi c√¥ng, b·∫£ng gi√°, quy ƒë·ªãnh & ch·ªçn v·∫≠t t∆∞ th√¥ng minh ‚Äì g·ªçn, d·ªÖ tra c·ª©u.">
<link rel="canonical" href="https://tranmai210jlo.github.io/tin-tuc/">

<meta property="og:type" content="website">
<meta property="og:url" content="https://tranmai210jlo.github.io/tin-tuc/">
<meta property="og:title" content="Tin t·ª©c & Kinh nghi·ªám MXD">
<meta property="og:description" content="M·∫πo thi c√¥ng, b·∫£ng gi√°, quy ƒë·ªãnh & ch·ªçn v·∫≠t t∆∞.">
<meta property="og:image" content="https://tranmai210jlo.github.io/assets/og-news.jpg">
<meta property="og:image:width" content="1200"><meta property="og:image:height" content="630">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Tin t·ª©c & Kinh nghi·ªám MXD">
<meta name="twitter:description" content="M·∫πo thi c√¥ng, b·∫£ng gi√°, quy ƒë·ªãnh & ch·ªçn v·∫≠t t∆∞.">
<meta name="twitter:image" content="https://tranmai210jlo.github.io/assets/og-news.jpg">
<head>
  <meta charset="utf-8">
 <title>Tin t·ª©c & Kinh nghi·ªám MXD ‚Äì M·∫πo thi c√¥ng & v·∫≠t t∆∞</title>
<meta name="description" content="Tin t·ª©c & kinh nghi·ªám MXD: m·∫πo thi c√¥ng, b·∫£ng gi√°, quy ƒë·ªãnh ph√°p l√Ω, ch·ªçn v·∫≠t t∆∞ th√¥ng minh ‚Äì g·ªçn, d·ªÖ tra c·ª©u.">
  <link rel="icon" href="/assets/placeholder.png">
  <meta name="color-scheme" content="dark">
  <style>
    :root{
      color-scheme: dark;
      --bg:#0b0f14; --card:#121821; --muted:#93a4b7; --text:#eaf2ff;
      --brand:#5eead4; --brand2:#60a5fa; --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background: radial-gradient(1200px 600px at top right,#0d1520,#0b0f14 40%),var(--bg); color:var(--text)}
    a{color:inherit; text-decoration:none}

    .container{max-width:1100px;margin:0 auto;padding:0 20px}
    .nav{position:sticky;top:0;z-index:30;background:rgba(11,15,20,.7);backdrop-filter:blur(8px);
      border-bottom:1px solid rgba(255,255,255,.06)}
    .nav-inner{display:flex;align-items:center;justify-content:space-between;height:64px}
    .brand{display:flex;gap:10px;align-items:center;font-weight:800}
    .logo{height:34px;width:34px;border-radius:10px;background:linear-gradient(135deg,var(--brand),var(--brand2));
      display:grid;place-items:center;color:#001218;box-shadow:var(--shadow)}
    .pill{padding:10px 14px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08)}
    .hero{padding:40px 0 10px;text-align:center}
    .hero h1{margin:0 0 8px;font-size:clamp(26px,4vw,42px)}
    .muted{color:var(--muted)}

    /* Form t√¨m ki·∫øm + l·ªçc */
    .filters{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin:14px 0 18px}
    input[type="text"],select{padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);color:var(--text)}
    /* Dropdown t·ªëi & m≈©i t√™n */
    select{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding-right:42px;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8"><path fill="%2393a4b7" d="M0 0l6 8 6-8z"/></svg>');
      background-repeat:no-repeat;background-position:right 12px center}
    select option,select optgroup{background:#0b0f14;color:var(--text)}
    select:focus{outline:none;border-color:rgba(96,165,250,.6);box-shadow:0 0 0 3px rgba(96,165,250,.2)}
    @media (max-width:480px){select{font-size:16px}}

    /* L∆∞·ªõi b√†i vi·∫øt */
    .grid{display:grid;gap:16px;grid-template-columns:repeat(1,minmax(0,1fr))}
    @media(min-width:700px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:1024px){.grid{grid-template-columns:repeat(3,1fr)}}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);display:flex;flex-direction:column}
    .thumb{aspect-ratio:16/10;background:#0f1621}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .content{padding:14px;display:grid;gap:8px}
    .meta{display:flex;gap:8px;flex-wrap:wrap;font-size:12px;color:var(--muted)}
    .tag{padding:4px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.1)}
    .btn{padding:12px 16px;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));color:var(--text);cursor:pointer}
    .btn.brand{background:linear-gradient(135deg,var(--brand),var(--brand2));color:#001218;border:none}
    .load{display:flex;justify-content:center;margin:18px 0 40px}
    footer{padding:38px 0;color:var(--muted);border-top:1px solid rgba(255,255,255,.06);margin-top:24px}

    /* FAB v·ªÅ trang ch·ªß (g·ªçn nh·∫π) */
    .home-fab{position:fixed;right:16px;bottom:18px;z-index:10050;transition:.2s;transform:translateY(12px);opacity:0;pointer-events:none}
    .home-fab.show{transform:translateY(0);opacity:1;pointer-events:auto}
    .home-fab a{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:999px;
      border:1px solid rgba(255,255,255,.08);background:linear-gradient(135deg,var(--brand),var(--brand2));color:#001218;font-weight:700;text-decoration:none;box-shadow:var(--shadow)}
  </style>
<title>MXD ‚Äì Trang mua s·∫Øm ƒë·ªì d√πng x√¢y d·ª±ng</title>
<meta name="description" content="C·ª≠a h√†ng v·∫≠t t∆∞, keo ·ªëp l√°t, ch·ªëng th·∫•m... Mua qua link affiliate ho·∫∑c ƒë·∫∑t thi c√¥ng tr·ª±c ti·∫øp.">
<link rel="canonical" href="https://tranmai210jlo.github.io/">

<meta property="og:type" content="website">
<meta property="og:url" content="https://tranmai210jlo.github.io/">
<meta property="og:site_name" content="MXD ‚Äì Trang mua s·∫Øm ƒë·ªì d√πng x√¢y d·ª±ng">
<meta property="og:title" content="MXD ‚Äì Trang mua s·∫Øm ƒë·ªì d√πng x√¢y d·ª±ng">
<meta property="og:description" content="C·ª≠a h√†ng v·∫≠t t∆∞, keo ·ªëp l√°t, ch·ªëng th·∫•m... Mua qua link affiliate ho·∫∑c ƒë·∫∑t thi c√¥ng tr·ª±c ti·∫øp.">
<meta property="og:image" content="https://tranmai210jlo.github.io/assets/og-home.jpg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="MXD ‚Äì Trang mua s·∫Øm ƒë·ªì d√πng x√¢y d·ª±ng">
<meta name="twitter:description" content="C·ª≠a h√†ng v·∫≠t t∆∞, keo ·ªëp l√°t, ch·ªëng th·∫•m...">
<meta name="twitter:image" content="https://tranmai210jlo.github.io/assets/og-home.jpg">
</head>
<script>
// MXD ‚Äî Render b√†i vi·∫øt t·ª´ /tin-tuc/posts.json (JS-only, d√πng HTML s·∫µn c√≥: #q, #cat, #list, #more)
(async function () {
  const $list = document.getElementById('list');
  const $q    = document.getElementById('q');     // √¥ t√¨m ki·∫øm
  const $cat  = document.getElementById('cat');   // dropdown danh m·ª•c
  const $more = document.getElementById('more');  // n√∫t Xem th√™m

  let posts = [];
  try {
    const res = await fetch('/tin-tuc/posts.json', { cache: 'no-store' });
    posts = await res.json();
  } catch (e) {
    console.error(e);
    if ($list) $list.innerHTML = '<p>L·ªói t·∫£i d·ªØ li·ªáu b√†i vi·∫øt.</p>';
    return;
  }

  // Build danh m·ª•c t·ª´ d·ªØ li·ªáu
  const cats = [...new Set(posts.map(p => p.category).filter(Boolean))].sort();
  if ($cat && $cat.options.length <= 1) {
    for (const c of cats) {
      const opt = document.createElement('option');
      opt.value = c; opt.textContent = c;
      $cat.appendChild(opt);
    }
  }

  // Ph√¢n trang nh·∫π
  let page = 1;
  const PAGE_SIZE = 9;

  const card = (p) => {
    const dStr = new Date(p.date).toLocaleDateString('vi-VN');
    const tags = (p.tags || []).map(t => `<span class="tag">#${t}</span>`).join(' ');
    return `
      <article class="post-card">
        <a href="/tin-tuc/post.html?id=${encodeURIComponent(p.id)}" style="text-decoration:none;color:inherit">
          <img src="${p.cover}" alt="${p.title}" loading="lazy" style="width:100%;height:160px;object-fit:cover;display:block;border-radius:8px"/>
          <h3 style="margin:8px 0 4px;font-size:1.05rem">${p.title}</h3>
          <p style="opacity:.9;margin:0 0 6px">${p.excerpt || ''}</p>
          <div style="opacity:.8;font-size:.9rem;margin-bottom:6px">${dStr} ¬∑ ${p.readingMins || 5} ph√∫t ƒë·ªçc</div>
          <div style="display:flex;gap:.25rem;flex-wrap:wrap">${tags}</div>
        </a>
      </article>
    `;
  };

  function filtered() {
    const q = ($q?.value || '').toLowerCase().trim();
    const c = $cat?.value || '';
    return posts.filter(p => {
      const hitCat = !c || p.category === c;
      const hay = [p.title, p.excerpt, ...(p.tags || [])].join(' ').toLowerCase();
      const hitQ = !q || hay.includes(q);
      return hitCat && hitQ;
    });
  }

  function render(reset = false) {
    const data = filtered();
    if (reset) page = 1;
    const slice = data.slice(0, page * PAGE_SIZE);
    $list.innerHTML = slice.map(card).join('') || '<p>Kh√¥ng c√≥ b√†i ph√π h·ª£p.</p>';
    if ($more) $more.style.display = slice.length < data.length ? '' : 'none';
  }

  $q?.addEventListener('input', () => render(true));
  $cat?.addEventListener('change', () => render(true));
  $more?.addEventListener('click', () => { page++; render(false); });

  render(true);
})();
</script>
<body>
  <nav class="nav">
    <div class="container nav-inner">
      <a class="brand" href="/"><div class="logo">M</div><div>MXD ‚Ä¢ Tin t·ª©c & Kinh nghi·ªám</div></a>
      <div style="display:flex;gap:10px;align-items:center">
        <a class="pill" href="/">Trang ch·ªß</a>
        <a class="pill" href="/index.html#products">C·ª≠a h√†ng</a>
      </div>
    </div>
  </nav>

  <header class="hero container">
    <h1>Tin t·ª©c & Kinh nghi·ªám thi c√¥ng</h1>
    <p class="muted">M·∫πo thi c√¥ng, b·∫£ng gi√°, quy ƒë·ªãnh ph√°p l√Ω, ch·ªçn v·∫≠t t∆∞ th√¥ng minh ‚Äì g√≥i g·ªçn, d·ªÖ tra c·ª©u.</p>
    <div class="filters">
      <input id="q" type="text" placeholder="T√¨m b√†i vi·∫øt, t·ª´ kh√≥a‚Ä¶">
      <select id="cat" aria-label="L·ªçc theo danh m·ª•c"><option>T·∫•t c·∫£ danh m·ª•c</option></select>
    </div>
  </header>

  <main class="container">
    <section id="list" class="grid" aria-live="polite"></section>
    <div class="load"><button id="more" class="btn">Xem th√™m</button></div>
  </main>

  <footer>
    <div class="container">¬© <span id="year"></span> MXD ‚Äì H√†ng tin d√πng c·ªßa th·ª£.</div>
  </footer>

  <!-- FAB Trang ch·ªß -->
  <div id="homeFab" class="home-fab"><a href="/">üè† Trang ch·ªß</a></div>

  <script>
(() => {
  // ==== TI·ªÜN √çCH ====
  const $ = (s) => document.querySelector(s);
  const fmtDate = (s) => new Date(s).toLocaleDateString('vi-VN',
    {day:'2-digit',month:'2-digit',year:'numeric'});

  // ==== D·ªÆ LI·ªÜU M·∫™U ====
  const POSTS = [
    {
      slug: "bao-gia-xay-dung-2025",
      title: "T·ªïng h·ª£p b·∫£ng gi√° th·∫ßu ‚Äì m·∫πo & l∆∞u √Ω h·ª£p ƒë·ªìng 2025",
      date: "2025-08-09",
      category: "B·∫£ng gi√°",
      readmin: 6,
      cover: "https://images.unsplash.com/photo-1503387762-592deb58ef4e?q=80&w=1200&auto=format&fit=crop",
      excerpt: "Khung gi√° nh√¢n c√¥ng, v·∫≠t t∆∞ ph·ªï bi·∫øn v√† c√°ch ch·ªët ƒëi·ªÅu kho·∫£n ƒë·ªÉ h·∫°n ch·∫ø ph√°t sinh.",
      tags: ["b·∫£ng gi√°","h·ª£p ƒë·ªìng","nh√¢n c√¥ng"]
    },
    {
      slug: "quy-dinh-giay-phep",
      title: "Checklist h·ªì s∆° & th·ªùi gian x·ª≠ l√Ω gi·∫•y ph√©p x√¢y d·ª±ng",
      date: "2025-08-09",
      category: "Quy ƒë·ªãnh & ph√°p l√Ω",
      readmin: 5,
      cover: "https://images.unsplash.com/photo-1520607162513-77705c0f0d4a?q=80&w=1200&auto=format&fit=crop",
      excerpt: "Nh·ªØng gi·∫•y t·ªù b·∫Øt bu·ªôc, m·∫´u ƒë∆°n, l·ªá ph√≠ v√† l·ªô tr√¨nh x·ª≠ l√Ω ƒë·ªÉ kh√¥ng b·ªã tr·ªÖ ti·∫øn ƒë·ªô.",
      tags: ["gi·∫•y ph√©p","th·ªß t·ª•c"]
    },
    {
      slug: "meo-ron-gach-sach-bong",
      title: "M·∫πo ch√† ron g·∫°ch s·∫°ch, k√≠n & kh√¥ng ·ªë",
      date: "2025-08-08",
      category: "M·∫πo thi c√¥ng",
      readmin: 4,
      cover: "https://images.unsplash.com/photo-1519710164239-da123dc03ef4?q=80&w=1200&auto=format&fit=crop",
      excerpt: "Ch·ªçn keo ch√≠t m·∫°ch, t·ªâ l·ªá n∆∞·ªõc, th·ªùi ƒëi·ªÉm ch√† v√† x·ª≠ l√Ω v·∫øt ·ªë sau 1‚Äì2 tu·∫ßn.",
      tags: ["·ªëp l√°t","ron g·∫°ch"]
    },
    {
      slug: "chon-keo-op-lat-ngoai-troi",
      title: "Ch·ªçn keo ·ªëp l√°t cho ban c√¥ng & ngo√†i tr·ªùi",
      date: "2025-08-07",
      category: "Ch·ªçn v·∫≠t t∆∞",
      readmin: 7,
      cover: "https://images.unsplash.com/photo-1523419409543-a7ea0c203267?q=80&w=1200&auto=format&fit=crop",
      excerpt: "So s√°nh g·ªëc xi mƒÉng vs polymer, ch·ªãu UV/m∆∞a, ƒë·ªô b√°m v√† ƒë·ªô d√†y l·ªõp d√°n khuy·∫øn ngh·ªã.",
      tags: ["keo ·ªëp l√°t","ngo√†i tr·ªùi"]
    }
  ];

  // ==== STATE ====
  const params = new URLSearchParams(location.search);
  const STATE = {
    q: (params.get('q') || '').trim(),
    cat: params.get('cat') || 'T·∫•t c·∫£ danh m·ª•c',
    page: +(params.get('page') || 1),
    per: 6
  };

  // ==== KH·ªûI T·∫†O FORM L·ªåC ====
  const catSel = $('#cat');
  const qInput = $('#q');
  const listEl = $('#list');
  const moreBtn = $('#more');

  if (!catSel || !qInput || !listEl || !moreBtn) {
    console.error('Thi·∫øu ph·∫ßn t·ª≠ UI (#cat, #q, #list, #more). Ki·ªÉm tra l·∫°i id trong HTML.');
    return;
  }

  const CATS_RAW = [...new Set(POSTS.map(p=>p.category))];
  const CATS = ['T·∫•t c·∫£ danh m·ª•c', 'Kinh nghi·ªám (m·∫πo + ch·ªçn v·∫≠t t∆∞)', ...CATS_RAW];
  catSel.innerHTML = CATS.map(c=>`<option value="${c}">${c}</option>`).join('');
  if (!CATS.includes(STATE.cat)) STATE.cat = 'T·∫•t c·∫£ danh m·ª•c';
  catSel.value = STATE.cat;
  qInput.value = STATE.q;

  // ==== L·ªåC ====
  function filterPosts(){
    const term = STATE.q.toLowerCase();
    return POSTS
      .filter(p => {
        const inCat =
          STATE.cat === 'T·∫•t c·∫£ danh m·ª•c' ||
          p.category === STATE.cat ||
          (STATE.cat === 'Kinh nghi·ªám (m·∫πo + ch·ªçn v·∫≠t t∆∞)' &&
           (p.category === 'M·∫πo thi c√¥ng' || p.category === 'Ch·ªçn v·∫≠t t∆∞'));
        const inText = !term || (p.title + ' ' + p.excerpt + ' ' + p.tags.join(' '))
          .toLowerCase()
          .includes(term);
        return inCat && inText;
      })
      .sort((a,b)=> new Date(b.date) - new Date(a.date));
  }

  // ==== V·∫º ====
  function render(){
    const items = filterPosts();
    const end = STATE.page * STATE.per;
    listEl.innerHTML = items.slice(0,end).map(p=>`
      <article class="card">
        <a class="thumb" href="/tin-tuc/${p.slug}.html" aria-label="${p.title}">
          <img loading="lazy" src="${p.cover}" alt="${p.title}">
        </a>
        <div class="content">
          <a href="/tin-tuc/${p.slug}.html"><strong>${p.title}</strong></a>
          <div class="meta">
            <span class="tag">${p.category}</span>
            <span>${fmtDate(p.date)}</span>
            <span>‚Ä¢ ${p.readmin} ph√∫t ƒë·ªçc</span>
          </div>
          <p class="muted">${p.excerpt}</p>
          <div class="meta">${p.tags.map(t=>`#${t}`).join(' ')}</div>
        </div>
      </article>
    `).join('');
    moreBtn.style.display = (items.length > end) ? 'inline-flex' : 'none';

    const sp = new URLSearchParams({ q: STATE.q, cat: STATE.cat, page: String(STATE.page) });
    history.replaceState(null,'','?'+sp.toString());
  }

  // ==== S·ª∞ KI·ªÜN ====
  qInput.addEventListener('input', e=>{ STATE.q = e.target.value.trim(); STATE.page = 1; render(); });
  catSel.addEventListener('change', e=>{ STATE.cat = e.target.value; STATE.page = 1; render(); });
  moreBtn.addEventListener('click', ()=>{ STATE.page++; render(); });

  // FAB Trang ch·ªß
  const fab = document.getElementById('homeFab');
  const toggleFab = () => { (window.scrollY > 250) ? fab.classList.add('show') : fab.classList.remove('show'); };
  window.addEventListener('scroll', toggleFab);

  // ==== BOOT ====
  render(); toggleFab();
  const yearEl = document.getElementById('year');
  if (yearEl) yearEl.textContent = new Date().getFullYear();
})();
</script>

  // ===== D·ªÆ LI·ªÜU B√ÄI VI·∫æT =====
  const POSTS = [
    {
      slug: "bao-gia-xay-dung-2025",
      title: "T·ªïng h·ª£p b·∫£ng gi√° th·∫ßu ‚Äì m·∫πo & l∆∞u √Ω h·ª£p ƒë·ªìng 2025",
      date: "2025-08-09",
      category: "B·∫£ng gi√°",
      readmin: 6,
      cover: "https://images.unsplash.com/photo-1503387762-592deb58ef4e?q=80&w=1200&auto=format&fit=crop",
      excerpt: "Khung gi√° nh√¢n c√¥ng, v·∫≠t t∆∞ ph·ªï bi·∫øn v√† c√°ch ch·ªët ƒëi·ªÅu kho·∫£n ƒë·ªÉ h·∫°n ch·∫ø ph√°t sinh.",
      tags: ["b·∫£ng gi√°","h·ª£p ƒë·ªìng","nh√¢n c√¥ng"]
    },
    {
      slug: "quy-dinh-giay-phep",
      title: "Checklist h·ªì s∆° & th·ªùi gian x·ª≠ l√Ω gi·∫•y ph√©p x√¢y d·ª±ng",
      date: "2025-08-09",
      category: "Quy ƒë·ªãnh & ph√°p l√Ω",
      readmin: 5,
      cover: "https://images.unsplash.com/photo-1520607162513-77705c0f0d4a?q=80&w=1200&auto=format&fit=crop",
      excerpt: "Nh·ªØng gi·∫•y t·ªù b·∫Øt bu·ªôc, m·∫´u ƒë∆°n, l·ªá ph√≠ v√† l·ªô tr√¨nh x·ª≠ l√Ω ƒë·ªÉ kh√¥ng b·ªã tr·ªÖ ti·∫øn ƒë·ªô.",
      tags: ["gi·∫•y ph√©p","th·ªß t·ª•c"]
    },
    {
      slug: "meo-ron-gach-sach-bong",
      title: "M·∫πo ch√† ron g·∫°ch s·∫°ch, k√≠n & kh√¥ng ·ªë",
      date: "2025-08-08",
      category: "M·∫πo thi c√¥ng",
      readmin: 4,
      cover: "https://images.unsplash.com/photo-1519710164239-da123dc03ef4?q=80&w=1200&auto=format&fit=crop",
      excerpt: "Ch·ªçn keo ch√≠t m·∫°ch, t·ªâ l·ªá n∆∞·ªõc, th·ªùi ƒëi·ªÉm ch√† v√† x·ª≠ l√Ω v·∫øt ·ªë sau 1‚Äì2 tu·∫ßn.",
      tags: ["·ªëp l√°t","ron g·∫°ch"]
    },
    {
      slug: "chon-keo-op-lat-ngoai-troi",
      title: "Ch·ªçn keo ·ªëp l√°t cho ban c√¥ng & ngo√†i tr·ªùi",
      date: "2025-08-07",
      category: "Ch·ªçn v·∫≠t t∆∞",
      readmin: 7,
      cover: "https://images.unsplash.com/photo-1523419409543-a7ea0c203267?q=80&w=1200&auto=format&fit=crop",
      excerpt: "So s√°nh g·ªëc xi mƒÉng vs polymer, ch·ªãu UV/m∆∞a, ƒë·ªô b√°m v√† ƒë·ªô d√†y l·ªõp d√°n khuy·∫øn ngh·ªã.",
      tags: ["keo ·ªëp l√°t","ngo√†i tr·ªùi"]
    }
  ];

  // ===== TI·ªÜN √çCH =====
  const $ = s => document.querySelector(s);
  const fmtDate = s => new Date(s).toLocaleDateString('vi-VN',{day:'2-digit',month:'2-digit',year:'numeric'});

  // ===== STATE & KH·ªûI T·∫†O =====
  const params = new URLSearchParams(location.search);
  const STATE = {
    q: params.get('q') || '',
    cat: params.get('cat') || 'T·∫•t c·∫£ danh m·ª•c',
    page: +(params.get('page') || 1),
    per: 6
  };

  // Danh m·ª•c + m·ª•c g·ªôp ‚ÄúKinh nghi·ªám‚Ä¶‚Äù
  const CATS_RAW = [...new Set(POSTS.map(p=>p.category))];
  const CATS = ['T·∫•t c·∫£ danh m·ª•c', 'Kinh nghi·ªám (m·∫πo + ch·ªçn v·∫≠t t∆∞)', ...CATS_RAW];
  const catSel = $('#cat');
  catSel.innerHTML = CATS.map(c=>`<option value="${c}">${c}</option>`).join('');
  if (!CATS.includes(STATE.cat)) STATE.cat = 'T·∫•t c·∫£ danh m·ª•c';
  catSel.value = STATE.cat;

  // Prefill √¥ t√¨m ki·∫øm
  $('#q').value = STATE.q;

  // ===== L·ªåC & V·∫º DANH S√ÅCH =====
  function filterPosts(){
    const term = STATE.q.trim().toLowerCase();

    return POSTS
      .filter(p => {
        const inCat =
          STATE.cat === 'T·∫•t c·∫£ danh m·ª•c' ||
          p.category === STATE.cat ||
          (
            STATE.cat === 'Kinh nghi·ªám (m·∫πo + ch·ªçn v·∫≠t t∆∞)' &&
            (p.category === 'M·∫πo thi c√¥ng' || p.category === 'Ch·ªçn v·∫≠t t∆∞')
          );

        const inText = !term || (p.title + ' ' + p.excerpt + ' ' + p.tags.join(' '))
          .toLowerCase().includes(term);

        return inCat && inText;
      })
      .sort((a,b)=> new Date(b.date) - new Date(a.date));
  }

  function render(){
    const list = $('#list');
    const items = filterPosts();
    const end = STATE.page * STATE.per;

    list.innerHTML = items.slice(0,end).map(p=>`
      <article class="card">
        <a class="thumb" href="/tin-tuc/${p.slug}.html" aria-label="${p.title}">
          <img loading="lazy" src="${p.cover}" alt="${p.title}">
        </a>
        <div class="content">
          <a href="/tin-tuc/${p.slug}.html"><strong>${p.title}</strong></a>
          <div class="meta">
            <span class="tag">${p.category}</span>
            <span>${fmtDate(p.date)}</span>
            <span>‚Ä¢ ${p.readmin} ph√∫t ƒë·ªçc</span>
          </div>
          <p class="muted">${p.excerpt}</p>
          <div class="meta">${p.tags.map(t=>`#${t}`).join(' ')}</div>
        </div>
      </article>
    `).join('');

    const more = $('#more');
    more.style.display = (items.length > end) ? 'inline-flex' : 'none';

    const sp = new URLSearchParams({ q: STATE.q, cat: STATE.cat, page: String(STATE.page) });
    history.replaceState(null,'','?'+sp.toString());
  }

  // ===== S·ª∞ KI·ªÜN =====
  $('#q').addEventListener('input', e=>{ STATE.q = e.target.value; STATE.page = 1; render(); });
  $('#cat').addEventListener('change', e=>{ STATE.cat = e.target.value; STATE.page = 1; render(); });
  $('#more').addEventListener('click', ()=>{ STATE.page++; render(); });

  // FAB Trang ch·ªß
  const fab = document.getElementById('homeFab');
  const toggleFab = () => { (window.scrollY > 250) ? fab.classList.add('show') : fab.classList.remove('show'); };
  window.addEventListener('scroll', toggleFab);

  // ===== BOOT =====
  render(); toggleFab();
  document.getElementById('year').textContent = new Date().getFullYear();
</script>
  
</body>
</html>
